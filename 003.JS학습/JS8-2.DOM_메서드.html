<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>JS8-2. DOM 메서드</title>
        <style>
            .wrap {
                display: flex;
                width: 600px;
                min-height: 600px;
                margin: 0 auto;
                padding: 15px;
                border: 4px dotted lightseagreen;
            }
            .wrap > div {
                outline: 1px solid red;
                width: 300px;
            }

            div img {
                width: 50px;
            }

            /*서브메뉴 숨기기*/
            .smenu > div {
                height: 0;
                overflow: hidden;
            }

            #div02 {
                width: 600px;
                padding: 10px;
            }

            #div02 ul {
                display: flex;
                /* 플렉스 박스 */
                flex-wrap: wrap;

                margin: 0;
                padding: 10px;
                list-style: none;
                text-align: center;
            }

            #div02 ul li {
                padding: 10px;
            }
        </style>
        <script>
            // DOM 선택함수
            const qs = (x) => document.querySelector(x);
            const qsa = (x) => document.querySelectorAll(x);

            // addEvent 함수
            // ele - 요소, evt - 이벤트, fn - 함수
            const addEvt = (ele, evt, fn) => 
            ele.addEventListener(evt, fn);

            ////////// 로드구역 ///////////////
            window.addEventListener("DOMContentLoaded", () => {
                // 로딩확인
                console.log("로딩완료!");

                /* 
                    마우스오버시
                    1. 서브메뉴 보이기
                    2. 링크이동하기
                */
                // 1. 대상선정: .smenu
                const smenu = qsa(".smenu");

                //    console.log('메뉴:',smenu);

                // 2. 이벤트 설정하기
                // 이벤트 종류: mouseover / mouseout

                // for of문
                for (let x of smenu) {
                    // console.log('x:',x);

                    // 오버시 //////////////
                    x.onmouseover = () => {
                        // console.log('오버:',x);
                        // 1. 대상: 하위의 div
                        let target = x.querySelector("div");

                        // 2. 하위 ol요소의 높이값 알아오기
                        let hv = target.querySelector("ol").offsetHeight;
                        // console.log('높이값:',hv);

                        // 3. 높이값 변경
                        target.style.height = hv + "px";
                        target.style.transition = "height .4s ease-out";
                    }; ///////// mouseover ///////

                    // 아웃시 ///////////////
                    x.onmouseout = () => {
                        // console.log('아웃:',x);
                        // 1. 대상: 하위의 div
                        let target = x.querySelector("div");
                        // 2. 높이값 변경
                        target.style.height = "0";
                    }; ///////// mouseout ///////
                } /////////// for of ///////////

                /********************************************** 
                    [ 선택요소의 현재 크기, 위치값 알아오는 JS속성 ]
                    1. 선택요소.offsetWidth : 가로값
                    2. 선택요소.offsetHeight : 높이값
                    3. 선택요소.offsetTop : top 위치값
                    4. 선택요소.offsetLeft : left 위치값            
                **********************************************/

                // [추가기능: 링크 클릭시 페이지새창이동]
                // 1. 대상선정 : .smenu ol a
                const link = qsa(".smenu ol a");

                // console.log('링크대상:',link);

                // 2. forEach() 메서드로 대상에 이벤트 걸기
                link.forEach((ele) => {
                    // 내가만든 이벤트 등록 함수 호출!
                    addEvt(ele, "click", linkFn);
                }); ///////// forEach /////////////

                // link.forEach(ele=>addEvt(ele,'click',linkFn));

                // 3. 실행함수 만들기
                function linkFn(e) {
                    // 호출확인 : this는 a요소 자신!
                    // console.log('나야나!',this.innerText);

                    // 0. a요소 텍스트 읽기
                    let atxt = this.innerText;

                    // 1. a요소 기본이동막기
                    e.preventDefault();

                    // 2. 이동할 주소 분기하여 할당하기
                    // 주소변수
                    let url;

                    switch (atxt) {
                        case "Google":
                            url = "http://www.google.com";
                            break;
                        case "Naver":
                            url = "http://www.naver.com";
                            break;
                        case "Daum":
                            url = "http://www.daum.net";
                            break;
                        case "Nate":
                            url = "http://www.nate.com";
                            break;
                        case "SK":
                            url = "http://www.sktelecom.com";
                            break;
                        case "KT":
                            url = "http://www.kt.com";
                            break;
                        case "Uplus":
                            url = "http://www.uplus.co.kr";
                            break;
                        case "CGV":
                            url = "http://www.cgv.co.kr";
                            break;
                        case "MEGABOX":
                            url = "http://www.megabox.co.kr";
                            break;
                        case "LOTTE CINEMA":
                            url = "https://www.lottecinema.co.kr/NLCHS";
                            break;
                        case "GMARKET":
                            url = "http://www.gmarket.co.kr";
                            break;
                        case "11번가":
                            url = "http://www.11st.co.kr";
                            break;
                        case "Auction":
                            url = "http://www.auction.co.kr";
                            break;
                        case "스토어팜":
                            url = "https://shopping.naver.com/";
                            break;
                        case "인터파크":
                            url = "http://www.interpark.co.kr";
                            break;
                        case "쿠팡":
                            url = "http://www.coopang.co.kr";
                            break;
                        case "Apple":
                            url = "http://www.apple.com";
                            break;
                        case "Samsung":
                            url = "http://www.samsung.com";
                            break;
                        case "넷마블":
                            url = "http://www.netmarble.net";
                            break;
                        case "넥슨":
                            url = "https://www.nexon.com";
                            break;
                        case "IMC":
                            url = "http://www.imc.co.kr";
                            break;
                    } ///////// switch case /////////

                    console.log("할당url:", url);

                    // 3. 페이지 이동하기
                    // 페이지이동
                    // (1) 현재창 이동
                    // location.href = 이동주소
                    // (2) 새창 이동
                    // window.open(이동주소)
                    window.open(url);
                    // location.href = url;
                } ////////// linkFn 함수 ////////////

                /************************************************** 
                
                    [ 요소의 생성, 삭제, 이동하기 ]

                    1. 맨뒤 생성 혹은 맨뒤 이동
                    -> 선택요소.appendChild(요소)

                    2. 특정위치에 요소 넣기 혹은 이동
                    -> 선택요소.insertBefore(넣을놈,넣을놈전놈)

                    3. 요소의 삭제
                    -> 선택요소.remove()

                    4. 새로운 요소 생성 (메모리상에 생성함)
                    -> document.createElement(태그명)

                    5. 요소에 새로운 속성넣기 (메모리상에 생성함)
                    -> document.createAttribute(속성명)

                    6. 생성된 속성에 값넣기
                    -> 생성된속성.value = 값

                    7. 요소의 새로운 속성 넣기
                    -> 선택요소.setAttributeNode(새로운속성)

                **************************************************/

                //////// 새리스트 요소 생성하기 ///////
                // 이벤트 종류: click
                // 이벤트 대상: .nbt
                // 변경대상: #div02 ul
                /////////////////////////////////////

                // 1. 대상선정 
                // 1-1. 새로생성 버튼 담기
                const btnNew = qs('.nbt');
                // 1-2. 변경대상
                const box2 = qs('#div02 ul');

                console.log('대상:',btnNew,box2);

                // 이미지 alt 설명 배열
                const avenName = 
                ['아이언맨','딱딱이','토르','닥스','스타로드'];

                // 2. 이벤트 걸기
                addEvt(btnNew,'click',makeEle);

                // 3. 새요소만들기 함수
                function makeEle(){
                    // 호출확인
                    console.log('만들어!');

                    // 1. 새로운 li를 생성하여 변수에 할당
                    let newEle = document.createElement('li');

                    // 2. 랜덤수 만들기
                    // 1부터 최대수까지의 랜덤수구하기:
                    // Math.ceil(Math.random()*최대수)
                    // Math.ceil() 소수점 올림처리 메서드
                    // Math.random() 난수발생 메서드
                    let rdnNum = Math.ceil(Math.random()*5);
                    console.log(rdnNum);

                    // 3. 메모리상에 생성된 li에 이미지요소 넣기
                    newEle.innerHTML = 
                    `<img 
                    src="images/ab${rdnNum}.jpg" 
                    alt="${avenName[rdnNum-1]}"
                    title="클릭하시면 지워집니다!">`;


                    // 4. li 클릭시 li 지우기
                    newEle.onclick = () => newEle.remove();

                    // 5. 변경대상에 새로운 li넣기
                    // appendChild(요소)
                    // -> 맨뒤에 새로운 요소 추가!!!
                    box2.appendChild(newEle);


                } /////////// makeEle 함수 ////////////


                // 기존에 있는 li에 지우기 넣기
                // box2 변수 아래 li
                box2.querySelectorAll('li')
                .forEach(ele=>{
                    // 지움설정
                    ele.onclick = () => ele.remove();
                    // 툴팁넣기
                    ele.querySelector('img').title = 
                    '클릭하시면 지워집니다!';
                }); //////////// forEach ///////////


                // 맨뒤이동 버튼 클릭시 /////////
                // 맨앞요소를 맨뒤로 이동하기 ///
                // 이벤트 대상: .mvl
                // 변경대상: #div02 ul -> box2변수

                // 1. 대상선정
                const btnMoveLast = qs('.mvl');

                // 2. 이벤트 연결하기
                addEvt(btnMoveLast,'click',moveLast);

                // 3. 함수만들기
                function moveLast(){
                    console.log('끝으로!');

                    // 1. 맨앞요소 선택하기
                    let firstEle = 
                    box2.querySelectorAll('li')[0]

                    // 2. 맨앞요소 맨뒤로 이동하기
                    // appendChild(맨앞요소)
                    // -> 기존요소를 선택하면 이동됨!
                    box2.appendChild(firstEle);

                } ////////// moveLast함수 ///////////


                /// 맨앞이동버튼 클릭시 ////////////
                // 맨뒤li가 맨 앞으로 이동됨
                // 이벤트 대상: .mvf
                // 변경대상: #div02 ul -> box2변수

                // 1. 대상선정: .mvf
                const btnMoveFirst = qs('.mvf');

                // 2. 이벤트 연결하기
                addEvt(btnMoveFirst,'click',moveFirst);

                // 3. 함수만들기
                function moveFirst(){
                    console.log('맨앞으로!');

                    // 1. 변경대상선정
                    let eles = box2.querySelectorAll('li');

                    // 2. 마지막 컬렉션 순번 계산 : 개수 - 1
                    let seq = eles.length - 1;

                    // 3. 맨뒤li 맨앞으로 이동
                    // insertBefore(넣을놈,넣을놈전놈)
                    // 넣을놈 : 맨뒤li -> eles[eles.length-1]
                    // 넣을놈전놈 : 맨앞li -> eles[0]
                    // 맨뒤 배열이나 컬렉션 번호는 [개수-1]
                    box2.insertBefore(eles[seq],eles[0])


                } //////////// moveFirst함수 /////////////

        /************************************************** 
            ※ appendChild() 와 insertBefore()는 
            대상을 정하는 것에 따라 중간에 적용할 수 있다!
        ************************************************/






            }); ///////////// 로드구역 //////////////////////
        </script>
    </head>

    <body>
        <div class="wrap">
            <div id="div01">
                마우스오버시 <br />
                1. 서브메뉴 보이기 <br />
                2. 링크이동하기
                <ul>
                    <li class="smenu">
                        <a href="#">검색포털사이트</a>
                        <div>
                            <ol>
                                <li><a href="#">Google</a></li>
                                <li><a href="#">Naver</a></li>
                                <li><a href="#">Daum</a></li>
                                <li><a href="#">Nate</a></li>
                            </ol>
                        </div>
                    </li>
                    <li class="smenu">
                        <a href="#">통신사사이트</a>
                        <div>
                            <ol>
                                <li><a href="#">SK</a></li>
                                <li><a href="#">KT</a></li>
                                <li><a href="#">Uplus</a></li>
                            </ol>
                        </div>
                    </li>
                    <li class="smenu">
                        <a href="#">영화관사이트</a>
                        <div>
                            <ol>
                                <li><a href="#">CGV</a></li>
                                <li><a href="#">MEGABOX</a></li>
                                <li><a href="#">LOTTE CINEMA</a></li>
                            </ol>
                        </div>
                    </li>
                    <li class="smenu">
                        <a href="#">쇼핑몰사이트</a>
                        <div>
                            <ol>
                                <li><a href="#">GMARKET</a></li>
                                <li><a href="#">11번가</a></li>
                                <li><a href="#">Auction</a></li>
                                <li><a href="#">스토어팜</a></li>
                                <li><a href="#">인터파크</a></li>
                                <li><a href="#">쿠팡</a></li>
                            </ol>
                        </div>
                    </li>
                    <li class="smenu">
                        <a href="#">스마트폰사이트</a>
                        <div>
                            <ol>
                                <li><a href="#">Apple</a></li>
                                <li><a href="#">Samsung</a></li>
                            </ol>
                        </div>
                    </li>
                    <li class="smenu">
                        <a href="#">게임사이트</a>
                        <div>
                            <ol>
                                <li><a href="#">넷마블</a></li>
                                <li><a href="#">넥슨</a></li>
                                <li><a href="#">IMC</a></li>
                            </ol>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="div02">
                <h2>요소의 생성,삭제,이동하기</h2>
                <button class="nbt">새리스트생성</button> <br /><br />
                <button class="mvl">맨뒤이동</button> <br /><br />
                <button class="mvf">맨앞이동</button>
                <ul>
                    <li>
                        <img src="images/ab1.jpg" alt="아이언맨" title="아이언맨" />
                    </li>
                    <li>
                        <img src="images/ab2.jpg" alt="딱딱이" title="딱딱이" />
                    </li>
                    <li><img src="images/ab3.jpg" alt="토르" title="토르" /></li>
                    <li><img src="images/ab4.jpg" alt="닥스" title="닥스" /></li>
                    <li>
                        <img src="images/ab5.jpg" alt="스타로드" title="스타로드" />
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
